{% extends "base.html" %}

{% block title %}Th√¥ng tin Tool ti√™u hao{% endblock %}

{% block extra_css %}
<style>
  .holder-page {
    max-width: 1120px;
    margin: 0 auto;
    padding: 16px 0 32px;
  }

  /* ========= BREADCRUMB & HEADER ========= */
  .hp-breadcrumb {
    font-size: 13px;
    color: #6b7280;
    margin-bottom: 8px;
  }
  .hp-breadcrumb a {
    color: #4b5563;
    text-decoration: none;
  }
  .hp-breadcrumb span {
    margin: 0 4px;
  }

  .hp-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 16px;
    margin-bottom: 16px;
  }
  .hp-title-block {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  .hp-main-title-row {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px;
  }
  .hp-main-title {
    font-size: 22px;
    font-weight: 700;
    color: #0f172a;
  }
  .hp-main-code {
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 999px;
    background: #eff6ff;
    color: #1d4ed8;
    border: 1px solid #bfdbfe;
  }

  .hp-sub-row {
    display: flex;
    flex-wrap: wrap;
    gap: 8px 16px;
    font-size: 13px;
    color: #4b5563;
  }

  .hp-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 999px;
    border: 1px solid #e5e7eb;
    background: #f9fafb;
    color: #374151;
  }
  .hp-badge-status-ok {
    background: #ecfdf3;
    color: #166534;
    border-color: #bbf7d0;
  }
  .hp-badge-status-warn {
    background: #fef9c3;
    color: #854d0e;
    border-color: #facc15;
  }
  .hp-badge-status-stop {
    background: #fef2f2;
    color: #b91c1c;
    border-color: #fecaca;
  }

  .hp-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }
  .hp-btn {
    border-radius: 999px;
    border: 1px solid #e5e7eb;
    background: #ffffff;
    padding: 6px 14px;
    font-size: 13px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
  }
  .hp-btn-primary {
    background: #2563eb;
    color: #ffffff;
    border-color: #2563eb;
  }
  .hp-btn span {
    font-size: 14px;
  }

  /* ========= LAYOUT & CARD ========= */
  .hp-layout {
    display: grid;
    grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
    gap: 16px;
    margin-bottom: 18px;
  }

  .hp-card,
  .hp-history-card,
  .hp-fuzzy-card {
    background: #ffffff;
    border-radius: 20px;
    padding: 16px 16px 14px;
    border: 1px solid #e5e7eb;
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.04);
  }

  .hp-card-header,
  .hp-history-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
  }

  .hp-card-title,
  .hp-history-title {
    font-size: 15px;
    font-weight: 600;
    color: #111827;
  }

  .hp-card-sub {
    font-size: 12px;
    color: #6b7280;
  }

  .hp-info-grid {
    display: grid;
    grid-template-columns: 1.1fr 1fr;
    gap: 8px 16px;
    margin-top: 10px;
    font-size: 13px;
  }
  .hp-info-item-label {
    font-size: 12px;
    color: #6b7280;
    margin-bottom: 2px;
  }
  .hp-info-item-value {
    font-size: 13px;
    color: #111827;
    font-weight: 500;
  }

  .hp-divider {
    border-top: 1px dashed #e5e7eb;
    margin: 10px 0;
  }

  /* ========= THANH T·ªíN KHO ========= */
  .hp-health-box {
    margin-top: 8px;
    padding: 8px 10px;
    border-radius: 14px;
    background: #f9fafb;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .hp-health-label {
    font-size: 12px;
    color: #6b7280;
    white-space: nowrap;
  }
  .hp-health-bar-wrap {
    flex: 1;
  }
  .hp-health-bar {
    position: relative;
    width: 100%;
    height: 8px;
    border-radius: 999px;
    background: #f3f4f6;
    overflow: hidden;
  }
    .hp-health-bar-inner {
    position: absolute;
    inset: 0;
    background: linear-gradient(to right, #22c55e, #16a34a);
  }

  .hp-health-score {
    font-size: 12px;
    font-weight: 600;
    color: #15803d;
    white-space: nowrap;
  }

  /* ========= L·ªäCH S·ª¨ ========= */
  .hp-history-filter {
    font-size: 12px;
    color: #6b7280;
  }

  .hp-table-wrapper {
    width: 100%;
    overflow-x: auto;
  }
  table.hp-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 12px;
  }
  .hp-table thead {
    background: #f9fafb;
  }
  .hp-table th,
  .hp-table td {
    padding: 8px 10px;
    text-align: left;
    border-bottom: 1px solid #f3f4f6;
    white-space: nowrap;
  }
  .hp-table th {
    font-weight: 600;
    color: #4b5563;
  }
  .hp-table td {
    color: #111827;
  }

  .hp-chip {
    display: inline-flex;
    align-items: center;
    padding: 3px 8px;
    border-radius: 999px;
    font-size: 11px;
    border: 1px solid #e5e7eb;
    background: #f9fafb;
  }

  /* ========= FUZZY ========= */
  .hp-fuzzy-card {
    margin-top: 16px;
  }

  .hp-fuzzy-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
  }
  .hp-fuzzy-title {
    font-size: 15px;
    font-weight: 600;
    color: #111827;
  }
  .hp-fuzzy-note {
    font-size: 12px;
    color: #6b7280;
  }

  .hp-fuzzy-summary {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px;
    padding: 8px 10px;
    border-radius: 12px;
    background: #f9fafb;
    margin-bottom: 10px;
  }
  .hp-fuzzy-summary-label {
    font-size: 12px;
    color: #6b7280;
  }
  .hp-fuzzy-summary-value {
    font-size: 13px;
    font-weight: 600;
  }
  .hp-fuzzy-summary-value-ok {
    color: #166534;
  }

  .hp-fuzzy-table-wrapper {
    width: 100%;
    overflow-x: auto;
  }
  table.hp-fuzzy-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 12px;
  }
  .hp-fuzzy-table thead {
    background: #f9fafb;
  }
  .hp-fuzzy-table th,
  .hp-fuzzy-table td {
    padding: 6px 8px;
    text-align: left;
    border-bottom: 1px solid #f3f4f6;
    white-space: nowrap;
  }
  .hp-fuzzy-table th {
    font-weight: 600;
    color: #4b5563;
  }
  .hp-fuzzy-table td {
    color: #111827;
  }

  .hp-fuzzy-subtitle {
    font-size: 13px;
    font-weight: 600;
    color: #374151;
    margin-bottom: 6px;
  }

  @media (max-width: 900px) {
    .hp-layout {
      grid-template-columns: minmax(0, 1fr);
    }
    .hp-header {
      flex-direction: column;
      align-items: flex-start;
    }
  }
</style>
{% endblock %}

{% block content %}
<div class="holder-page">
  <!-- Breadcrumb -->
  <div class="hp-breadcrumb">
    <a href="#">Kho c√¥ng c·ª•</a>
    <span>/</span>
    <a href="#">Tool ti√™u hao</a>
    <span>/</span>
    <span>{{ tool.ma_tool|default:"-" }}</span>
  </div>

  <!-- Header -->
  <div class="hp-header">
    <div class="hp-title-block">
      <div class="hp-main-title-row">
        <div class="hp-main-title">
          {{ tool.ten_tool|default:"(Ch∆∞a c√≥ t√™n tool)" }}
        </div>
        <div class="hp-main-code">
          M√£: {{ tool.ma_tool|default:"-" }}
        </div>
      </div>

      <div class="hp-sub-row">
        <div>Nh√≥m tool: <strong>{{ tool.nhom_tool|default:"-" }}</strong></div>
        <div>D√≤ng tool: <strong>{{ tool.dong_tool|default:"-" }}</strong></div>
        <div>Nh√† s·∫£n xu·∫•t: <strong>{{ tool.nha_san_xuat|default:"-" }}</strong></div>
        <div>Ti√™u chu·∫©n: <strong>{{ tool.tieu_chuan|default:"-" }}</strong></div>
      </div>

      <div class="hp-sub-row">
        {% if tool.ton_kho == 0 %}
          <span class="hp-badge hp-badge-status-stop">
            H·∫øt h√†ng - c·∫ßn ƒë·∫∑t g·∫•p
          </span>
        {% elif tool.muc_canh_bao and tool.ton_kho and tool.ton_kho <= tool.muc_canh_bao %}
          <span class="hp-badge hp-badge-status-warn">
            S·∫Øp h·∫øt - n√™n l·∫≠p y√™u c·∫ßu mua
          </span>
        {% else %}
          <span class="hp-badge hp-badge-status-ok">
            T·ªìn kho an to√†n
          </span>
        {% endif %}

        <span class="hp-badge">
          ƒê∆°n v·ªã t√≠nh: {{ tool.don_vi_tinh|default:"-" }}
        </span>

        <span class="hp-badge">
          V·ªã tr√≠: T·ªß {{ tool.tu|default:"-" }} - NgƒÉn {{ tool.ngan|default:"-" }}
        </span>

        <span class="hp-badge">
          M√°y / Line ∆∞u ti√™n: {{ tool.may_uu_tien|default:"-" }}
        </span>

        {% if tool.loai_gia_cong %}
        <span class="hp-badge">
          Lo·∫°i gia c√¥ng: {{ tool.get_loai_gia_cong_display }}
        </span>
        {% endif %}

        {% if tool.nhom_vat_lieu_iso %}
        <span class="hp-badge">
          Nh√≥m v·∫≠t li·ªáu ISO: {{ tool.nhom_vat_lieu_iso }}
        </span>
        {% endif %}
      </div>
    </div>

    <div class="hp-actions">
      <a href="{% url 'tool_muontra:tool_transaction_create' tool.id %}" class="hp-btn hp-btn-primary">
        <span>üì¶</span> Phi·∫øu c·∫•p tool
      </a>
    </div>
  </div>

  <!-- Layout 2 c·ªôt -->
  <div class="hp-layout">
    <!-- TH√îNG TIN CHUNG -->
    <div class="hp-card">
      <div class="hp-card-header">
        <div>
          <div class="hp-card-title">Th√¥ng tin chung</div>
          <div class="hp-card-sub">Th√¥ng tin nh·∫≠n d·∫°ng v√† ph√¢n lo·∫°i Tool ti√™u hao</div>
        </div>
        <span class="hp-badge">ID n·ªôi b·ªô: {{ tool.id }}</span>
      </div>

      <div class="hp-info-grid">
        <div>
          <div class="hp-info-item-label">T√™n tool</div>
          <div class="hp-info-item-value">
            {{ tool.ten_tool|default:"-" }}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">M√£ tool</div>
          <div class="hp-info-item-value">
            {{ tool.ma_tool|default:"-" }}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">Nh√≥m tool</div>
          <div class="hp-info-item-value">
            {{ tool.nhom_tool|default:"-" }}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">D√≤ng tool</div>
          <div class="hp-info-item-value">
            {{ tool.dong_tool|default:"-" }}
          </div>
        </div>
      </div>

      <div class="hp-divider"></div>

      <div class="hp-info-grid">
        <div>
          <div class="hp-info-item-label">Nh√† s·∫£n xu·∫•t</div>
          <div class="hp-info-item-value">
            {{ tool.nha_san_xuat|default:"-" }}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">M√£ nh√† s·∫£n xu·∫•t</div>
          <div class="hp-info-item-value">
            {{ tool.ma_nha_sx|default:"-" }}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">V·∫≠t li·ªáu gia c√¥ng ph√π h·ª£p</div>
          <div class="hp-info-item-value">
            {{ tool.vat_lieu_phu_hop|default:"-" }}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">Tu·ªïi th·ªç chu·∫©n</div>
          <div class="hp-info-item-value">
            {{ tool.tuoi_tho_chuan|default:"-" }}
          </div>
        </div>
      </div>

      <div class="hp-divider"></div>

      <div class="hp-info-grid">
        <div>
          <div class="hp-info-item-label">Lo·∫°i gia c√¥ng</div>
          <div class="hp-info-item-value">
            {{ tool.get_loai_gia_cong_display|default:"-" }}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">Nh√≥m v·∫≠t li·ªáu ISO</div>
          <div class="hp-info-item-value">
            {{ tool.nhom_vat_lieu_iso|default:"-" }}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">D√≤ng m√°y ph√π h·ª£p</div>
          <div class="hp-info-item-value">
            {{ tool.may_phu_hop|default:"-" }}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">Y√™u c·∫ßu coolant</div>
          <div class="hp-info-item-value">
            {% if tool.can_coolant %}C√≥ y√™u c·∫ßu{% else %}Kh√¥ng b·∫Øt bu·ªôc{% endif %}
          </div>
        </div>
      </div>

      <div class="hp-divider"></div>

      <div>
        <div class="hp-info-item-label">Ghi ch√∫</div>
        <div class="hp-info-item-value">
          {{ tool.ghi_chu|default:"Kh√¥ng c√≥ ghi ch√∫ th√™m." }}
        </div>
      </div>
    </div>

    <!-- TH√îNG S·ªê & T·ªíN KHO -->
    <div class="hp-card">
      <div class="hp-card-header">
        <div>
          <div class="hp-card-title">Th√¥ng s·ªë k·ªπ thu·∫≠t & t·ªìn kho</div>
          <div class="hp-card-sub">D√πng ƒë·ªÉ theo d√µi m·ª©c ti√™u hao v√† ƒë·∫∑t h√†ng</div>
        </div>
      </div>

      <div class="hp-info-grid">
        <div>
          <div class="hp-info-item-label">ƒê∆∞·ªùng k√≠nh l√†m vi·ªác</div>
          <div class="hp-info-item-value">
            {% if tool.duong_kinh %}
              {{ tool.duong_kinh }} mm
            {% else %}
              -
            {% endif %}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">Chi·ªÅu d√†i l√†m vi·ªác</div>
          <div class="hp-info-item-value">
            {% if tool.chieu_dai_lam_viec %}
              {{ tool.chieu_dai_lam_viec }} mm
            {% else %}
              -
            {% endif %}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">ƒê∆°n v·ªã t√≠nh</div>
          <div class="hp-info-item-value">
            {{ tool.don_vi_tinh|default:"-" }}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">Ng√†y nh·∫≠p kho</div>
          <div class="hp-info-item-value">
            {% if tool.ngay_nhap_kho %}
              {{ tool.ngay_nhap_kho|date:"d/m/Y" }}
            {% else %}
              -
            {% endif %}
          </div>
        </div>
      </div>

      <div class="hp-divider"></div>

      <div class="hp-info-grid">
        <div>
          <div class="hp-info-item-label">T·ªìn kho hi·ªán t·∫°i</div>
          <div class="hp-info-item-value">
            {% if tool.ton_kho is not None %}
              {{ tool.ton_kho }} {{ tool.don_vi_tinh|default:"" }}
            {% else %}
              -
            {% endif %}
          </div>
        </div>

        <div>
          <div class="hp-info-item-label">M·ª©c c·∫£nh b√°o t·ªëi thi·ªÉu</div>
          <div class="hp-info-item-value">
            {% if tool.muc_canh_bao is not None %}
              {{ tool.muc_canh_bao }} {{ tool.don_vi_tinh|default:"" }}
            {% else %}
              -
            {% endif %}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">Gi√° tr·ªã mua</div>
          <div class="hp-info-item-value">
            {% if tool.gia_tri_mua %}
              {{ tool.gia_tri_mua|floatformat:0 }} ƒë / {{ tool.don_vi_tinh|default:"ƒëv" }}
            {% else %}
              -
            {% endif %}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">M√°y / Line ∆∞u ti√™n</div>
          <div class="hp-info-item-value">
            {{ tool.may_uu_tien|default:"-" }}
          </div>
        </div>
      </div>

      <div class="hp-divider"></div>

      <div class="hp-info-grid">
        <div>
          <div class="hp-info-item-label">ƒêK min cho ph√©p</div>
          <div class="hp-info-item-value">
            {% if tool.duong_kinh_min %}
              {{ tool.duong_kinh_min }} mm
            {% else %}-{% endif %}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">ƒêK max cho ph√©p</div>
          <div class="hp-info-item-value">
            {% if tool.duong_kinh_max %}
              {{ tool.duong_kinh_max }} mm
            {% else %}-{% endif %}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">T·ª∑ l·ªá s√¢u l·ªó max (L/D)</div>
          <div class="hp-info-item-value">
            {% if tool.ty_le_sau_lo_max %}
              {{ tool.ty_le_sau_lo_max }}
            {% else %}-{% endif %}
          </div>
        </div>
        <div>
          <div class="hp-info-item-label">ƒê·ªô c·ª©ng VL (min ~ max)</div>
          <div class="hp-info-item-value">
            {% if tool.do_cung_min or tool.do_cung_max %}
              {{ tool.do_cung_min|default:"?" }} ~ {{ tool.do_cung_max|default:"?" }} HRC
            {% else %}
              -
            {% endif %}
          </div>
        </div>
      </div>

      <div class="hp-health-box">
        <div class="hp-health-label">M·ª©c t·ªìn kho</div>
        <div class="hp-health-bar-wrap">
          <div class="hp-health-bar">
            <div class="hp-health-bar-inner"></div>
          </div>
        </div>
        <div class="hp-health-score">
          {% if tool.ton_kho is not None %}
            {{ tool.ton_kho }} c√≤n l·∫°i
          {% else %}
            -
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <!-- L·ªäCH S·ª¨ C·∫§P PH√ÅT & TI√äU HAO -->
  <div class="hp-history-card">
    <div class="hp-history-header">
      <div class="hp-history-title">L·ªãch s·ª≠ c·∫•p ph√°t & ti√™u hao</div>
      <div class="hp-history-filter">
        10 l·∫ßn c·∫•p ph√°t g·∫ßn nh·∫•t (tool ti√™u hao - kh√¥ng tr·∫£ l·∫°i)
      </div>
    </div>

    <div class="hp-table-wrapper">
      <table class="hp-table">
        <thead>
          <tr>
            <th>Ng√†y</th>
            <th>Ng∆∞·ªùi nh·∫≠n</th>
            <th>M√°y / Line</th>
            <th>S·ªë l∆∞·ª£ng</th>
            <th>M·ª•c ƒë√≠ch / Ghi ch√∫</th>
            <th>K·∫øt qu·∫£ s·ª≠ d·ª•ng</th>
          </tr>
        </thead>
        <tbody>
          {% if history_list %}
            {% for h in history_list %}
              <tr>
                <td>{{ h.ngay|date:"d/m/Y H:i" }}</td>
                <td>{{ h.nguoi_nhan|default:"-" }}</td>
                <td>{{ h.may|default:"-" }}</td>
                <td>{{ h.so_luong }} {{ tool.don_vi_tinh|default:"" }}</td>
                <td>{{ h.muc_dich|default:"-" }}</td>
                <td>
                  <span class="hp-chip">
                    {{ h.ket_qua|default:"Ti√™u hao b√¨nh th∆∞·ªùng" }}
                  </span>
                </td>
              </tr>
            {% endfor %}
          {% else %}
            <tr>
              <td colspan="6" style="text-align:center;color:#9ca3af;padding:10px;">
                Ch∆∞a c√≥ d·ªØ li·ªáu l·ªãch s·ª≠. Khi c√≥ model l·ªãch s·ª≠ c·∫•p ph√°t, truy·ªÅn <code>history_list</code> v√†o ƒë·ªÉ hi·ªÉn th·ªã.
              </td>
            </tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- ƒê√ÅNH GI√Å FUZZY CHO TOOL TI√äU HAO -->
  <div class="hp-fuzzy-card">
    <div class="hp-fuzzy-header">
      <div class="hp-fuzzy-title">ƒê√°nh gi√° fuzzy cho Tool ti√™u hao</div>
      <div class="hp-fuzzy-note">
        K·∫øt qu·∫£ g·ª£i √Ω th·ªùi ƒëi·ªÉm thay tool v√† ch·∫ø ƒë·ªô c·∫Øt t·ªëi ∆∞u.
      </div>
    </div>

    <div class="hp-fuzzy-summary">
      <span class="hp-fuzzy-summary-label">K·∫øt lu·∫≠n chung:</span>
      <span class="hp-fuzzy-summary-value hp-fuzzy-summary-value-ok">
        {{ tool.ket_luan_fuzzy|default:"Ch∆∞a c√≥ k·∫øt lu·∫≠n fuzzy. H·ªá th·ªëng s·∫Ω c·∫≠p nh·∫≠t sau khi c√≥ ƒë·ªß d·ªØ li·ªáu." }}
      </span>
    </div>

    <div class="hp-fuzzy-table-wrapper">
      <div class="hp-fuzzy-subtitle">Th√¥ng tin fuzzy tham chi·∫øu</div>
      <table class="hp-fuzzy-table">
        <thead>
          <tr>
            <th>Ti√™u ch√≠</th>
            <th>Gi√° tr·ªã / Ng∆∞·ª°ng</th>
            <th>Ghi ch√∫</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>ƒê·ªô m√≤n t·ªëi ƒëa (WEAR_MAX)</td>
            <td>
              {% if tool.wear_max is not None %}
                {{ tool.wear_max }}%
              {% else %}
                -
              {% endif %}
            </td>
            <td>Gi√° tr·ªã t∆∞∆°ng ·ª©ng 100% m√≤n</td>
          </tr>
          <tr>
            <td>Ng∆∞·ª°ng c·∫£nh b√°o thay (THRESH)</td>
            <td>
              {% if tool.nguong_thay is not None %}
                {{ tool.nguong_thay }}%
              {% else %}
                -
              {% endif %}
            </td>
            <td>Khi ƒë·ªô m√≤n v∆∞·ª£t m·ª©c n√†y ‚Üí khuy·∫øn ngh·ªã thay tool</td>
          </tr>
          <tr>
            <td>ƒê·ªô c·ª©ng v·∫≠t li·ªáu tham chi·∫øu (HRC)</td>
            <td>
              {% if tool.hrc_tham_chieu is not None %}
                {{ tool.hrc_tham_chieu }} HRC
              {% else %}
                -
              {% endif %}
            </td>
            <td>D√πng l√†m c∆° s·ªü t√≠nh to√°n tu·ªïi th·ªç</td>
          </tr>
          <tr>
            <td>Ch·∫ø ƒë·ªô c·∫Øt khuy·∫øn ngh·ªã</td>
            <td colspan="2">
              {{ tool.che_do_cat_khuyen_nghi|default:"Ch∆∞a c√≥ d·ªØ li·ªáu." }}
            </td>
          </tr>
        </tbody>
      </table>

      <div class="hp-divider" style="margin-top:12px;"></div>

      <div class="hp-fuzzy-subtitle">C√°c ƒëi·ªÉm ƒë√°nh gi√° m·ªù (1 = th·∫•p, 5 = r·∫•t cao)</div>
      <table class="hp-fuzzy-table">
        <thead>
          <tr>
            <th>Ti√™u ch√≠</th>
            <th>ƒêi·ªÉm (1‚Äì5)</th>
            <th>√ù nghƒ©a</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Gi√°</td>
            <td>{{ tool.diem_gia|default:"-" }}</td>
            <td>1 = r·∫•t r·∫ª, 5 = r·∫•t ƒë·∫Øt</td>
          </tr>
          <tr>
            <td>ƒê·ªô b·ªÅn</td>
            <td>{{ tool.diem_do_ben|default:"-" }}</td>
            <td>1 = nhanh m√≤n, 5 = r·∫•t b·ªÅn</td>
          </tr>
          <tr>
            <td>ƒê·ªô ·ªïn ƒë·ªãnh qu√° tr√¨nh</td>
            <td>{{ tool.diem_on_dinh|default:"-" }}</td>
            <td>1 = hay g√£y / k·∫πt phoi, 5 = ch·∫°y r·∫•t ·ªïn</td>
          </tr>
          <tr>
            <td>Ch·∫•t l∆∞·ª£ng b·ªÅ m·∫∑t</td>
            <td>{{ tool.diem_chat_luong_be_mat|default:"-" }}</td>
            <td>1 = b·ªÅ m·∫∑t th√¥, 5 = r·∫•t ƒë·∫πp</td>
          </tr>
          <tr>
            <td>ƒê·ªô s·∫µn c√≥</td>
            <td>{{ tool.diem_san_co|default:"-" }}</td>
            <td>1 = kh√≥ mua, 5 = lu√¥n c√≥ h√†ng</td>
          </tr>
          <tr>
            <td>∆Øu ti√™n d√πng tr∆∞·ªõc</td>
            <td>{{ tool.diem_uu_tien_dung_truoc|default:"-" }}</td>
            <td>1 = √≠t ∆∞u ti√™n, 5 = n√™n d√πng tr∆∞·ªõc c√°c d√≤ng kh√°c</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- HOLDER ƒêANG MATCH V·ªöI TOOL N√ÄY -->
  <div class="hp-card" style="margin-top:16px;">
    <div class="hp-card-header">
      <div>
        <div class="hp-card-title">Holder ƒëang kh·ªõp v·ªõi tool n√†y</div>
        <div class="hp-card-sub">
          Danh s√°ch c√°c holder ƒë√£ ƒë∆∞·ª£c c·∫•u h√¨nh t∆∞∆°ng th√≠ch (tool_khuyen_dung).
        </div>
      </div>
    </div>

    <div class="hp-table-wrapper">
      <table class="hp-table">
        <thead>
          <tr>
            <th>M√£ holder</th>
            <th>T√™n holder</th>
          </tr>
        </thead>
        <tbody>
          {% if holders_match %}
            {% for h in holders_match %}
              <tr>
                <td>{{ h.ma_holder|default:"-" }}</td>
                <td>{{ h.ten_holder|default:"(Ch∆∞a ƒë·∫∑t t√™n)" }}</td>
              </tr>
            {% endfor %}
          {% else %}
            <tr>
              <td colspan="3" style="text-align:center;color:#9ca3af;padding:10px;">
                Ch∆∞a c√≥ holder n√†o ƒë∆∞·ª£c ƒë√°nh d·∫•u khuy√™n d√πng cho tool n√†y.
              </td>
            </tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>

{% endblock %}
