{% extends "base.html" %}

{% block title %}T·∫°o Holder m·ªõi{% endblock %}

{% block extra_css %}
<style>
  .holder-page {
    max-width: 1120px;
    margin: 0 auto;
    padding: 16px 0 32px;
  }

  .hp-breadcrumb {
    font-size: 13px;
    color: #6b7280;
    margin-bottom: 8px;
  }
  .hp-breadcrumb a {
    color: #4b5563;
    text-decoration: none;
  }
  .hp-breadcrumb span {
    margin: 0 4px;
  }

  .hp-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 16px;
    margin-bottom: 16px;
  }
  .hp-title-block {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  .hp-main-title {
    font-size: 22px;
    font-weight: 700;
    color: #0f172a;
  }
  .hp-sub-row {
    font-size: 13px;
    color: #6b7280;
  }

  .hp-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }
  .hp-btn {
    border-radius: 999px;
    border: 1px solid #e5e7eb;
    background: #ffffff;
    padding: 6px 14px;
    font-size: 13px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    text-decoration: none;
  }
  .hp-btn-primary {
    background: #2563eb;
    color: #ffffff;
    border-color: #2563eb;
  }

  .hp-layout {
    display: grid;
    grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
    gap: 16px;
    margin-bottom: 18px;
  }

  .hp-card,
  .hp-history-card,
  .hp-fuzzy-card {
    background: #ffffff;
    border-radius: 20px;
    padding: 16px 16px 14px;
    border: 1px solid #e5e7eb;
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.04);
    margin-bottom: 16px;
  }

  .hp-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
  }

  .hp-card-title {
    font-size: 15px;
    font-weight: 600;
    color: #111827;
  }
  .hp-card-sub {
    font-size: 12px;
    color: #6b7280;
  }

  .hp-divider {
    border-top: 1px dashed #e5e7eb;
    margin: 12px 0;
  }

  /* ===== FORM ELEMENTS ===== */
  .hp-form-grid-2 {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 10px 16px;
  }
  .hp-form-grid-3 {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 10px 16px;
  }
  .hp-form-group {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  .hp-form-label {
    font-size: 12px;
    color: #6b7280;
  }
  .hp-form-label span {
    color: #ef4444;
    margin-left: 2px;
  }
  .hp-form-input,
  .hp-form-select,
  .hp-form-textarea {
    font-size: 13px;
    padding: 6px 8px;
    border-radius: 8px;
    border: 1px solid #e5e7eb;
    background: #f9fafb;
    color: #111827;
    width: 100%;
  }
  .hp-form-input:focus,
  .hp-form-select:focus,
  .hp-form-textarea:focus {
    outline: none;
    border-color: #2563eb;
    background: #ffffff;
    box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.1);
  }
  .hp-form-textarea {
    min-height: 70px;
    resize: vertical;
  }
  .hp-form-hint {
    font-size: 11px;
    color: #9ca3af;
  }

  .hp-form-actions {
    margin-top: 12px;
    display: flex;
    gap: 8px;
    justify-content: flex-end;
  }

  @media (max-width: 900px) {
    .hp-layout {
      grid-template-columns: minmax(0, 1fr);
    }
    .hp-header {
      flex-direction: column;
      align-items: flex-start;
    }
  }
</style>
{% endblock %}

{% block content %}
<div class="holder-page">
  <!-- Breadcrumb -->
  <div class="hp-breadcrumb">
    <a href="#">Kho c√¥ng c·ª•</a>
    <span>/</span>
    <a href="#">Danh s√°ch Holder</a>
    <span>/</span>
    <span>T·∫°o Holder m·ªõi</span>
  </div>

  <!-- Header -->
  <div class="hp-header">
    <div class="hp-title-block">
      <div class="hp-main-title">T·∫°o Holder m·ªõi</div>
      <div class="hp-sub-row">
        Nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin nh·∫≠n d·∫°ng, th√¥ng s·ªë k·ªπ thu·∫≠t v√† ƒëi·ªÅu ki·ªán b·∫£o tr√¨ cho Holder.
      </div>
    </div>

    <div class="hp-actions">
      <a href="{% url 'holder:holder_profile' %}" class="hp-btn">
        ‚¨Ö Quay l·∫°i danh s√°ch
      </a>
    </div>
  </div>

  <form method="post" action="">
    {% csrf_token %}

    <!-- LAYOUT 2 C·ªòT: TH√îNG TIN CHUNG & TH√îNG S·ªê K·ª∏ THU·∫¨T -->
    <div class="hp-layout">
      <!-- TH√îNG TIN CHUNG -->
      <div class="hp-card">
        <div class="hp-card-header">
          <div>
            <div class="hp-card-title">Th√¥ng tin chung</div>
            <div class="hp-card-sub">Th√¥ng tin nh·∫≠n d·∫°ng v√† qu·∫£n l√Ω Holder</div>
          </div>
        </div>

        <div class="hp-form-grid-2">
          <div class="hp-form-group">
            <label class="hp-form-label">
              T√™n thi·∫øt b·ªã<span>*</span>
            </label>
            <input
              type="text"
              name="ten_thiet_bi"
              class="hp-form-input"
              placeholder="VD: Holder HSK63A ER32 L=100"
              required
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">
              Nh√≥m thi·∫øt b·ªã<span>*</span>
            </label>
            <input
              type="text"
              name="nhom_thiet_bi"
              class="hp-form-input"
              placeholder="VD: Holder / Th√¢n dao"
              required
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">
              M√£ n·ªôi b·ªô / ID<span>*</span>
            </label>
            <input
              type="text"
              name="ma_noi_bo"
              class="hp-form-input"
              placeholder="VD: HLD-0001"
              required
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">
              M√£ nh√† s·∫£n xu·∫•t<span>*</span>
            </label>
            <input
              type="text"
              name="ma_nha_sx"
              class="hp-form-input"
              placeholder="VD: HSK63A-ER32-100"
              required
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">
              Lo·∫°i Holder
            </label>
            <input
              type="text"
              name="loai_holder"
              class="hp-form-input"
              placeholder="VD: HSK63A ER32"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">S·ªë serial</label>
            <input
              type="text"
              name="so_serial"
              class="hp-form-input"
              placeholder="VD: SN-2025-001"
            />
          </div>
        </div>

        <div class="hp-divider"></div>

        <div class="hp-form-grid-2">
          <div class="hp-form-group">
            <label class="hp-form-label">Nh√† s·∫£n xu·∫•t</label>
            <input
              type="text"
              name="nha_san_xuat"
              class="hp-form-input"
              placeholder="VD: SUMITOMO"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">Nh√† cung c·∫•p</label>
            <input
              type="text"
              name="nha_cung_cap"
              class="hp-form-input"
              placeholder="VD: C√¥ng ty TNHH ABC"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">Ng∆∞·ªùi qu·∫£n l√Ω</label>
            <input
              type="text"
              name="nguoi_quan_ly"
              class="hp-form-input"
              placeholder="VD: Nguy·ªÖn VƒÉn A"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">Tr·∫°ng th√°i t√†i s·∫£n</label>
            <select name="trang_thai_tai_san" class="hp-form-select">
              <option value="">-- Ch·ªçn tr·∫°ng th√°i --</option>
                <option value="dang_su_dung">ƒêang s·∫µn s√†ng</option>
                <option value="dang_bao_tri">ƒêang b·∫£o tr√¨</option>
                <option value="ngung_su_dung">Ng·ª´ng s·ª≠ d·ª•ng</option>
                <option value="dang_duoc_muon">ƒêang ƒë∆∞·ª£c m∆∞·ª£n</option>
            </select>
          </div>
        </div>
      </div>

      <!-- TH√îNG S·ªê K·ª∏ THU·∫¨T & KHO -->
      <div class="hp-card">
        <div class="hp-card-header">
          <div>
            <div class="hp-card-title">Th√¥ng s·ªë k·ªπ thu·∫≠t & v·ªã tr√≠ kho</div>
            <div class="hp-card-sub">D√πng ƒë·ªÉ ch·ªçn tool v√† qu·∫£n l√Ω t·ªìn kho</div>
          </div>
        </div>

        <div class="hp-form-grid-2">
          <div class="hp-form-group">
            <label class="hp-form-label">Chu·∫©n g√°</label>
            <input
              type="text"
              name="chuan_ga"
              class="hp-form-input"
              placeholder="VD: HSK63A"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">Lo·∫°i k·∫πp</label>
            <input
              type="text"
              name="loai_kep"
              class="hp-form-input"
              placeholder="VD: ER32"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">Chi·ªÅu d√†i l√†m vi·ªác (mm)</label>
            <input
              type="number"
              step="0.01"
              name="chieu_dai_lam_viec"
              class="hp-form-input"
              placeholder="VD: 100"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">ƒê∆∞·ªùng k√≠nh k·∫πp max (mm)</label>
            <input
              type="number"
              step="0.01"
              name="duong_kinh_kep_max"
              class="hp-form-input"
              placeholder="VD: 20"
            />
          </div>
        </div>

        <div class="hp-divider"></div>

        <div class="hp-form-grid-3">
          <div class="hp-form-group">
            <label class="hp-form-label">T·ªß / K·ªá</label>
            <input
              type="text"
              name="tu"
              class="hp-form-input"
              placeholder="VD: T·ªß A3"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">NgƒÉn</label>
            <input
              type="text"
              name="ngan"
              class="hp-form-input"
              placeholder="VD: NgƒÉn 02"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">M√°y / Line ∆∞u ti√™n</label>
            <input
              type="text"
              name="may_uu_tien"
              class="hp-form-input"
              placeholder="VD: CNC-01, CNC-02"
            />
          </div>
        </div>

        <div class="hp-divider"></div>

        <div class="hp-form-grid-2">
          <div class="hp-form-group">
            <label class="hp-form-label">Ng√†y nh·∫≠p kho</label>
            <input
              type="date"
              name="ngay_nhap_kho"
              class="hp-form-input"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">Gi√° tr·ªã mua (VND)</label>
            <input
              type="number"
              step="1000"
              min="0"
              name="gia_tri_mua"
              class="hp-form-input"
              placeholder="VD: 5200000"
            />
            <div class="hp-form-hint">Nh·∫≠p s·ªë, h·ªá th·ªëng c√≥ th·ªÉ format l·∫°i.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- B·∫¢O TR√å & L·ªäCH S·ª¨ S·ª¨ D·ª§NG (TH√îNG S·ªê HI·ªÜN T·∫†I) -->
    <div class="hp-card">
      <div class="hp-card-header">
        <div>
          <div class="hp-card-title">B·∫£o tr√¨ & t√¨nh tr·∫°ng hi·ªán t·∫°i</div>
          <div class="hp-card-sub">Th√¥ng tin ph·ª•c v·ª• b·∫£o tr√¨ ƒë·ªãnh k·ª≥ v√† theo d√µi</div>
        </div>
      </div>

      <div class="hp-form-grid-3">
        <div class="hp-form-group">
          <label class="hp-form-label">Chu k·ª≥ ki·ªÉm tra</label>
          <input
            type="text"
            name="chu_ky_kiem_tra"
            class="hp-form-input"
            placeholder="VD: 3 th√°ng / l·∫ßn"
          />
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">L·∫ßn ki·ªÉm tra g·∫ßn nh·∫•t</label>
          <input
            type="date"
            name="lan_kiem_tra_gan_nhat"
            class="hp-form-input"
          />
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">S·ªë l·∫ßn g√° / th√°o</label>
          <input
            type="number"
            min="0"
            name="so_lan_ga_thao"
            class="hp-form-input"
            placeholder="VD: 128"
          />
        </div>
      </div>

      <div class="hp-form-group" style="margin-top:10px;">
        <label class="hp-form-label">ƒê√°nh gi√° g·∫ßn nh·∫•t</label>
        <textarea
          name="danh_gia_gan_nhat"
          class="hp-form-textarea"
          placeholder="VD: T·ªët ‚Äì ch∆∞a ph√°t hi·ªán m√≤n c√¥n / m√≤n k·∫πp"
        ></textarea>
      </div>
    </div>

    <!-- (OPTIONAL) INPUT CHO FUZZY -->
    <div class="hp-card">
      <div class="hp-card-header">
        <div>
          <div class="hp-card-title">Th√¥ng tin fuzzy (n·∫øu nh·∫≠p tay)</div>
          <div class="hp-card-sub">
            C√≥ th·ªÉ ƒë·ªÉ tr·ªëng n·∫øu h·ªá th·ªëng t·ª± t√≠nh sau khi c√≥ d·ªØ li·ªáu s·ª≠ d·ª•ng.
          </div>
        </div>
      </div>

      <div class="hp-form-grid-3">
        <div class="hp-form-group">
          <label class="hp-form-label">ƒê·ªô c·ª©ng v·ªØng (CV) /10</label>
          <input
            type="number"
            step="0.1"
            min="0"
            max="10"
            name="cv"
            class="hp-form-input"
            placeholder="VD: 8.5"
          />
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">ƒê·ªô ch√≠nh x√°c g√° k·∫πp (DX) /10</label>
          <input
            type="number"
            step="0.1"
            min="0"
            max="10"
            name="dx"
            class="hp-form-input"
            placeholder="VD: 9.0"
          />
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">T√¨nh tr·∫°ng m√≤n (%)</label>
          <input
            type="number"
            step="1"
            min="0"
            max="100"
            name="mon"
            class="hp-form-input"
            placeholder="VD: 10"
          />
        </div>
      </div>

      <div class="hp-form-grid-2" style="margin-top:10px;">
        <div class="hp-form-group">
          <label class="hp-form-label">T·∫ßn su·∫•t s·ª≠ d·ª•ng (l·∫ßn/th√°ng)</label>
          <input
            type="number"
            min="0"
            name="tan_suat"
            class="hp-form-input"
            placeholder="VD: 12"
          />
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">Chi·ªÅu d√†i nh√¥ dao (LD) (mm)</label>
          <input
            type="number"
            step="0.1"
            min="0"
            name="ld"
            class="hp-form-input"
            placeholder="VD: 100"
          />
        </div>
      </div>

      <div class="hp-form-group" style="margin-top:10px;">
        <label class="hp-form-label">K·∫øt lu·∫≠n fuzzy / khuy·∫øn ngh·ªã</label>
        <textarea
          name="ket_luan_fuzzy"
          class="hp-form-textarea"
          placeholder="VD: Holder ph√π h·ª£p cho ch·∫ø ƒë·ªô c·∫Øt n·∫∑ng & b√°n tinh, ∆∞u ti√™n s·ª≠ d·ª•ng..."
        ></textarea>
      </div>
    </div>
<!-- T∆Ø∆†NG TH√çCH & G·ª¢I √ù -->
<div class="hp-card">
  <div class="hp-card-header">
    <div>
      <div class="hp-card-title">T∆∞∆°ng th√≠ch & G·ª£i √Ω</div>
      <div class="hp-card-sub">
        Thi·∫øt l·∫≠p m√£ nh√≥m t∆∞∆°ng th√≠ch v√† ch·ªçn c√°c tool khuy√™n d√πng.
      </div>
    </div>
  </div>

  <div class="hp-form-grid-2">

    <!-- M√É NH√ìM T∆Ø∆†NG TH√çCH -->
    <div class="hp-form-group">
      <label class="hp-form-label">
        M√£ nh√≥m t∆∞∆°ng th√≠ch
      </label>
      <input
        type="text"
        name="ma_nhom_tuong_thich"
        class="hp-form-input"
        placeholder="VD: BT40_ER32_L80 ho·∫∑c HSK63A_FaceMill"
      />
      <div class="hp-form-hint">
        C√°c Holder c√≥ c√πng m√£ n√†y ƒë∆∞·ª£c xem l√† t∆∞∆°ng ƒë∆∞∆°ng & c√≥ th·ªÉ thay th·∫ø.
      </div>
    </div>

    <!-- TOOL KHUY√äN D√ôNG -->
    <div class="hp-form-group">
      <label class="hp-form-label">
        Tool t∆∞∆°ng th√≠ch / khuy√™n d√πng
      </label>

      <select
        name="tool_khuyen_dung"
        class="hp-form-select"
        multiple
        size="6"
        style="height:140px;"
      >
        {% for tool in tool_list %}
        <option value="{{ tool.id }}">
          {{ tool.ten_tool }} ({{ tool.ma_tool }})
        </option>
        {% endfor %}
      </select>

      <div class="hp-form-hint">
        Gi·ªØ Ctrl ƒë·ªÉ ch·ªçn nhi·ªÅu tool t∆∞∆°ng th√≠ch.
      </div>
    </div>

  </div>
</div>

    <!-- N√öT L∆ØU -->
    <div class="hp-form-actions">
      <a href="{% url 'holder:holder_profile' %}" class="hp-btn">
        H·ªßy
      </a>
      <button type="submit" class="hp-btn hp-btn-primary">
        üíæ L∆∞u Holder
      </button>
    </div>
  </form>
</div>
{% endblock %}
