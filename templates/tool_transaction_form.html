{% extends "base.html" %}

{% block title %}Giao dịch tool - {{ tool.ten_tool }}{% endblock %}

{% block extra_css %}
<style>
  .page {
      max-width: 760px;
      margin: 0 auto;
      padding: 20px 0 40px;
  }
  .card {
      background: #ffffff;
      border-radius: 24px;
      padding: 28px 30px 34px;
      box-shadow: 0 16px 40px rgba(15,23,42,0.06);
      border: 1px solid #e5e7eb;
  }
  .title {
      font-size: 22px;
      font-weight: 700;
      color: var(--blue-strong);
      text-transform: uppercase;
      margin-bottom: 16px;
  }
  .info-box {
      background: var(--blue-soft);
      border-radius: 16px;
      padding: 12px 16px;
      margin-bottom: 20px;
      border: 1px solid rgba(56,189,248,0.4);
      color: var(--blue-strong);
      font-size: 14px;
  }
  .row { margin-bottom: 16px; }
  .label {
      font-size: 13px;
      font-weight: 600;
      color: var(--blue-strong);
      margin-bottom: 6px;
      display: block;
  }
  .input, .select, .textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid #d1d5db;
      background: #f9fafb;
      font-size: 14px;
      outline: none;
      transition: 0.2s;
  }
  .input:focus, .select:focus, .textarea:focus {
      background: #ffffff;
      border-color: var(--blue-tech);
      box-shadow: 0 0 0 1px var(--blue-soft);
  }
  .textarea {
      height: 90px;
      resize: none;
  }
  .submit {
      width: 100%;
      padding: 12px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: var(--blue-tech);
      color: #0f172a;
      font-size: 15px;
      font-weight: 700;
      transition: 0.2s;
      box-shadow: 0 4px 14px rgba(56,189,248,0.4);
      margin-top: 10px;
  }
  .submit:hover {
      background: #0ea5e9;
      transform: translateY(-2px);
  }
</style>
{% endblock %}

{% block content %}
<div class="page">
  <div class="card">

    <div class="title">Giao dịch tool</div>

    <!-- Thông tin tool -->
    <div class="info-box">
      <strong>Tool:</strong> {{ tool.ma_tool }} — {{ tool.ten_tool }}<br>
      <strong>Tồn kho hiện tại:</strong> {{ tool.ton_kho }}
    </div>

    <form method="post">
      {% csrf_token %}

      <!-- Loại giao dịch -->
      <div class="row">
        <label class="label">Loại giao dịch *</label>
        <select name="loai" class="select" required>
          <option value="">— Chọn loại giao dịch —</option>
          {% for value, label in loai_choices %}
            <option value="{{ value }}">{{ label }}</option>
          {% endfor %}
        </select>
      </div>

      <!-- Số lượng -->
      <div class="row">
        <label class="label">Số lượng *</label>
        <input type="number" min="1" name="so_luong"
               class="input" required placeholder="Nhập số lượng…">
      </div>

      <!-- Mã dự án (optional) -->
      <div class="row">
        <label class="label">Mã dự án (tùy chọn)</label>
        <input type="text" name="ma_du_an" class="input"
               placeholder="VD: PJ-001…">
      </div>

      <!-- Ghi chú (optional) -->
      <div class="row">
        <label class="label">Ghi chú</label>
        <textarea name="ghi_chu" class="textarea"
                  placeholder="Ghi chú thêm…"></textarea>
      </div>

      <button type="submit" class="submit">
        Lưu giao dịch
      </button>

    </form>

  </div>
</div>
<script>
    console.log("DEBUG TOOL:", {
        id: "{{ tool.id }}",
        ma_tool: "{{ tool.ma_tool }}",
        ten_tool: "{{ tool.ten_tool }}",
        ton_kho: "{{ tool.ton_kho }}",
    });
</script>

{% endblock %}
