{% extends "base.html" %}

{% block title %}T·∫°o Tool ti√™u hao m·ªõi{% endblock %}

{% block extra_css %}
<style>
  .holder-page {
    max-width: 1120px;
    margin: 0 auto;
    padding: 16px 0 32px;
  }

  .hp-breadcrumb {
    font-size: 13px;
    color: #6b7280;
    margin-bottom: 8px;
  }
  .hp-breadcrumb a {
    color: #4b5563;
    text-decoration: none;
  }
  .hp-breadcrumb span {
    margin: 0 4px;
  }

  .hp-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 16px;
    margin-bottom: 16px;
  }
  .hp-title-block {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  .hp-main-title {
    font-size: 22px;
    font-weight: 700;
    color: #0f172a;
  }
  .hp-sub-row {
    font-size: 13px;
    color: #6b7280;
  }

  .hp-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }
  .hp-btn {
    border-radius: 999px;
    border: 1px solid #e5e7eb;
    background: #ffffff;
    padding: 6px 14px;
    font-size: 13px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    text-decoration: none;
  }
  .hp-btn-primary {
    background: #2563eb;
    color: #ffffff;
    border-color: #2563eb;
  }

  .hp-layout {
    display: grid;
    grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
    gap: 16px;
    margin-bottom: 18px;
  }

  .hp-card {
    background: #ffffff;
    border-radius: 20px;
    padding: 16px 16px 14px;
    border: 1px solid #e5e7eb;
    box-shadow: 0 8px 24px rgba(15, 23, 42, 0.04);
    margin-bottom: 16px;
  }

  .hp-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
  }

  .hp-card-title {
    font-size: 15px;
    font-weight: 600;
    color: #111827;
  }
  .hp-card-sub {
    font-size: 12px;
    color: #6b7280;
  }

  .hp-divider {
    border-top: 1px dashed #e5e7eb;
    margin: 12px 0;
  }

  /* ===== FORM ELEMENTS ===== */
  .hp-form-grid-2 {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 10px 16px;
  }
  .hp-form-grid-3 {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 10px 16px;
  }
  .hp-form-group {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  .hp-form-label {
    font-size: 12px;
    color: #6b7280;
  }
  .hp-form-label span {
    color: #ef4444;
    margin-left: 2px;
  }
  .hp-form-input,
  .hp-form-select,
  .hp-form-textarea {
    font-size: 13px;
    padding: 6px 8px;
    border-radius: 8px;
    border: 1px solid #e5e7eb;
    background: #f9fafb;
    color: #111827;
    width: 100%;
  }
  .hp-form-input:focus,
  .hp-form-select:focus,
  .hp-form-textarea:focus {
    outline: none;
    border-color: #2563eb;
    background: #ffffff;
    box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.1);
  }
  .hp-form-textarea {
    min-height: 70px;
    resize: vertical;
  }
  .hp-form-hint {
    font-size: 11px;
    color: #9ca3af;
  }

  .hp-form-actions {
    margin-top: 12px;
    display: flex;
    gap: 8px;
    justify-content: flex-end;
  }

  .hp-inline-checkbox {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-top: 4px;
    font-size: 12px;
    color: #4b5563;
  }

  @media (max-width: 900px) {
    .hp-layout {
      grid-template-columns: minmax(0, 1fr);
    }
    .hp-header {
      flex-direction: column;
      align-items: flex-start;
    }
  }
</style>
{% endblock %}

{% block content %}
<div class="holder-page">
  <!-- Breadcrumb -->
  <div class="hp-breadcrumb">
    <a href="#">Kho c√¥ng c·ª•</a>
    <span>/</span>
    <a href="#">Tool ti√™u hao</a>
    <span>/</span>
    <span>T·∫°o Tool ti√™u hao m·ªõi</span>
  </div>

  <!-- Header -->
  <div class="hp-header">
    <div class="hp-title-block">
      <div class="hp-main-title">T·∫°o Tool ti√™u hao m·ªõi</div>
      <div class="hp-sub-row">
        Nh·∫≠p th√¥ng tin nh·∫≠n d·∫°ng, th√¥ng s·ªë k·ªπ thu·∫≠t, r√†ng bu·ªôc v√† t·ªìn kho cho tool ti√™u hao.
      </div>
    </div>

    <div class="hp-actions">
      <a href="{% url 'tool:tool_list' %}" class="hp-btn">
        ‚¨Ö Quay l·∫°i danh s√°ch
      </a>
    </div>
  </div>

  <form method="post" action="">
    {% csrf_token %}

    <!-- LAYOUT 2 C·ªòT: TH√îNG TIN CHUNG & TH√îNG S·ªê - T·ªíN KHO -->
    <div class="hp-layout">
      <!-- TH√îNG TIN CHUNG -->
      <div class="hp-card">
        <div class="hp-card-header">
          <div>
            <div class="hp-card-title">Th√¥ng tin chung</div>
            <div class="hp-card-sub">Th√¥ng tin nh·∫≠n d·∫°ng v√† ph√¢n lo·∫°i Tool ti√™u hao</div>
          </div>
        </div>

        <div class="hp-form-grid-2">
          <div class="hp-form-group">
            <label class="hp-form-label">
              T√™n tool<span>*</span>
            </label>
            <input
              type="text"
              name="ten_tool"
              class="hp-form-input"
              placeholder="VD: M≈©i khoan √ò10 HSS-Co"
              required
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">
              M√£ tool<span>*</span>
            </label>
            <input
              type="text"
              name="ma_tool"
              class="hp-form-input"
              placeholder="VD: DRL-10-2025A"
              required
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">
              Nh√≥m tool<span>*</span>
            </label>
            <input
              type="text"
              name="nhom_tool"
              class="hp-form-input"
              placeholder="VD: M≈©i khoan, Dao phay, M≈©i taro‚Ä¶"
              required
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">
              D√≤ng tool
            </label>
            <input
              type="text"
              name="dong_tool"
              class="hp-form-input"
              placeholder="VD: Drill, Endmill, Tap‚Ä¶"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">
              Nh√† s·∫£n xu·∫•t
            </label>
            <input
              type="text"
              name="nha_san_xuat"
              class="hp-form-input"
              placeholder="VD: YAMAWA, OSG, Sumitomo‚Ä¶"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">
              M√£ nh√† s·∫£n xu·∫•t
            </label>
            <input
              type="text"
              name="ma_nha_sx"
              class="hp-form-input"
              placeholder="VD: HSS-Co10-√ò10-100"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">Ti√™u chu·∫©n</label>
            <input
              type="text"
              name="tieu_chuan"
              class="hp-form-input"
              placeholder="VD: DIN 338, JIS, ISO‚Ä¶"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">Model</label>
            <input
              type="text"
              name="model"
              class="hp-form-input"
              placeholder="VD: HSS-Co10"
            />
          </div>
        </div>

        <div class="hp-divider"></div>

        <div class="hp-form-grid-2">
          <div class="hp-form-group">
            <label class="hp-form-label">V·∫≠t li·ªáu gia c√¥ng ph√π h·ª£p</label>
            <input
              type="text"
              name="vat_lieu_phu_hop"
              class="hp-form-input"
              placeholder="VD: C45, S50C, SUS304‚Ä¶"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">Ghi ch√∫ th√™m</label>
            <textarea
              name="ghi_chu"
              class="hp-form-textarea"
              placeholder="VD: ∆Øu ti√™n d√πng cho line CNC-01 ~ CNC-03, kh√¥ng d√πng cho v·∫≠t li·ªáu qu√° 50 HRC‚Ä¶"
            ></textarea>
          </div>
        </div>
      </div>

      <!-- TH√îNG S·ªê K·ª∏ THU·∫¨T & T·ªíN KHO -->
      <div class="hp-card">
        <div class="hp-card-header">
          <div>
            <div class="hp-card-title">Th√¥ng s·ªë k·ªπ thu·∫≠t & t·ªìn kho</div>
            <div class="hp-card-sub">Th√¥ng s·ªë h√¨nh h·ªçc v√† qu·∫£n l√Ω s·ªë l∆∞·ª£ng Tool ti√™u hao</div>
          </div>
        </div>

        <div class="hp-form-grid-2">
          <div class="hp-form-group">
            <label class="hp-form-label">ƒê∆∞·ªùng k√≠nh l√†m vi·ªác (mm)</label>
            <input
              type="number"
              step="0.01"
              min="0"
              name="duong_kinh"
              class="hp-form-input"
              placeholder="VD: 10"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">Chi·ªÅu d√†i l√†m vi·ªác (mm)</label>
            <input
              type="number"
              step="0.01"
              min="0"
              name="chieu_dai_lam_viec"
              class="hp-form-input"
              placeholder="VD: 25"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">ƒê∆°n v·ªã t√≠nh</label>
            <input
              type="text"
              name="don_vi_tinh"
              class="hp-form-input"
              placeholder="VD: c√°i, h·ªôp, b·ªô‚Ä¶"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">Tu·ªïi th·ªç chu·∫©n (s·ªë l·ªó / l·∫ßn d√πng)</label>
            <input
              type="text"
              name="tuoi_tho_chuan"
              class="hp-form-input"
              placeholder="VD: 1500 l·ªó / 1 tool"
            />
          </div>
        </div>

        <div class="hp-divider"></div>

        <div class="hp-form-grid-2">
          <div class="hp-form-group">
            <label class="hp-form-label">T·ªìn kho ban ƒë·∫ßu<span>*</span></label>
            <input
              type="number"
              step="1"
              min="0"
              name="ton_kho"
              class="hp-form-input"
              placeholder="VD: 12"
              required
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">M·ª©c c·∫£nh b√°o t·ªëi thi·ªÉu</label>
            <input
              type="number"
              step="1"
              min="0"
              name="muc_canh_bao"
              class="hp-form-input"
              placeholder="VD: 8"
            />
            <div class="hp-form-hint">Khi t·ªìn kho ‚â§ m·ª©c n√†y, h·ªá th·ªëng c·∫£nh b√°o c·∫ßn ƒë·∫∑t h√†ng.</div>
          </div>
        </div>

        <div class="hp-divider"></div>

        <div class="hp-form-grid-3">
          <div class="hp-form-group">
            <label class="hp-form-label">T·ªß / K·ªá</label>
            <input
              type="text"
              name="tu"
              class="hp-form-input"
              placeholder="VD: T·ªß A3"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">NgƒÉn / Khay</label>
            <input
              type="text"
              name="ngan"
              class="hp-form-input"
              placeholder="VD: NgƒÉn 02 ‚Äì Khay DRL10"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">M√°y / Line ∆∞u ti√™n</label>
            <input
              type="text"
              name="may_uu_tien"
              class="hp-form-input"
              placeholder="VD: CNC-01, CNC-02"
            />
          </div>
        </div>

        <div class="hp-divider"></div>

        <div class="hp-form-grid-2">
          <div class="hp-form-group">
            <label class="hp-form-label">Ng√†y nh·∫≠p kho</label>
            <input
              type="date"
              name="ngay_nhap_kho"
              class="hp-form-input"
            />
          </div>

          <div class="hp-form-group">
            <label class="hp-form-label">Gi√° tr·ªã mua (VND / ƒë∆°n v·ªã)</label>
            <input
              type="number"
              step="1000"
              min="0"
              name="gia_tri_mua"
              class="hp-form-input"
              placeholder="VD: 25000"
            />
            <div class="hp-form-hint">Nh·∫≠p ƒë∆°n gi√° 1 tool / 1 ƒë∆°n v·ªã.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- R√ÄNG BU·ªòC K·ª∏ THU·∫¨T / ISO / M√ÅY -->
    <div class="hp-card">
      <div class="hp-card-header">
        <div>
          <div class="hp-card-title">R√†ng bu·ªôc k·ªπ thu·∫≠t cho ƒë·ªÅ xu·∫•t fuzzy</div>
          <div class="hp-card-sub">
            D√πng ƒë·ªÉ l·ªçc tool ph√π h·ª£p v·ªõi b√†i to√°n gia c√¥ng (lo·∫°i gia c√¥ng, v·∫≠t li·ªáu, k√≠ch th∆∞·ªõc, m√°y...).
          </div>
        </div>
      </div>

      <div class="hp-form-grid-3">
        <div class="hp-form-group">
          <label class="hp-form-label">Lo·∫°i gia c√¥ng ch√≠nh<span>*</span></label>
          <select name="loai_gia_cong" class="hp-form-select" required>
            <option value="">-- Ch·ªçn lo·∫°i gia c√¥ng --</option>
            <option value="DRILL">Khoan</option>
            <option value="MILL">Phay</option>
            <option value="TAP">Taro</option>
            <option value="REAM">Doa</option>
            <option value="TURN">Ti·ªán</option>
          </select>
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">Nh√≥m v·∫≠t li·ªáu ISO</label>
          <select name="nhom_vat_lieu_iso" class="hp-form-select">
            <option value="">-- Kh√¥ng ch·ªçn / chung --</option>
            <option value="P">Th√©p (ISO P)</option>
            <option value="M">Th√©p kh√¥ng g·ªâ (ISO M)</option>
            <option value="K">Gang (ISO K)</option>
            <option value="N">Nh√¥m/kim lo·∫°i m√†u (ISO N)</option>
            <option value="S">H·ª£p kim ch·ªãu nhi·ªát (ISO S)</option>
            <option value="H">Th√©p ƒë√£ t√¥i (ISO H)</option>
          </select>
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">D√≤ng m√°y ph√π h·ª£p</label>
          <input
            type="text"
            name="may_phu_hop"
            class="hp-form-input"
            placeholder="VD: VMC 10.000 rpm, CNC ti·ªán..."
          />
        </div>
      </div>

      <div class="hp-form-grid-3" style="margin-top:10px;">
        <div class="hp-form-group">
          <label class="hp-form-label">ƒêK min cho ph√©p (mm)</label>
          <input
            type="number"
            step="0.01"
            min="0"
            name="duong_kinh_min"
            class="hp-form-input"
            placeholder="VD: 8"
          />
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">ƒêK max cho ph√©p (mm)</label>
          <input
            type="number"
            step="0.01"
            min="0"
            name="duong_kinh_max"
            class="hp-form-input"
            placeholder="VD: 12"
          />
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">T·ª∑ l·ªá s√¢u l·ªó max (L/D)</label>
          <input
            type="number"
            step="0.1"
            min="0"
            name="ty_le_sau_lo_max"
            class="hp-form-input"
            placeholder="VD: 5 (t·ª©c L = 5√óD)"
          />
        </div>
      </div>

      <div class="hp-form-grid-3" style="margin-top:10px;">
        <div class="hp-form-group">
          <label class="hp-form-label">ƒê·ªô c·ª©ng VL min (HRC)</label>
          <input
            type="number"
            step="1"
            min="0"
            name="do_cung_min"
            class="hp-form-input"
            placeholder="VD: 20"
          />
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">ƒê·ªô c·ª©ng VL max (HRC)</label>
          <input
            type="number"
            step="1"
            min="0"
            name="do_cung_max"
            class="hp-form-input"
            placeholder="VD: 45"
          />
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">T∆∞·ªõi ngu·ªôi / coolant</label>
          <div class="hp-inline-checkbox">
            <input
              type="checkbox"
              name="can_coolant"
              value="on"
              id="id_can_coolant"
            />
            <label for="id_can_coolant">Y√™u c·∫ßu coolant khi gia c√¥ng</label>
          </div>
        </div>
      </div>
    </div>

    <!-- FUZZY / TI√äU HAO (OPTIONAL) -->
    <div class="hp-card">
      <div class="hp-card-header">
        <div>
          <div class="hp-card-title">Th√¥ng tin fuzzy cho tool ti√™u hao (t√πy ch·ªçn)</div>
          <div class="hp-card-sub">
            C√≥ th·ªÉ ƒë·ªÉ tr·ªëng, h·ªá th·ªëng c√≥ th·ªÉ t·ª± t√≠nh sau d·ª±a tr√™n l·ªãch s·ª≠ c·∫•p ph√°t & s·ª≠ d·ª•ng.
          </div>
        </div>
      </div>

      <div class="hp-form-grid-3">
        <div class="hp-form-group">
          <label class="hp-form-label">ƒê·ªô m√≤n d·ª± ki·∫øn t·ªëi ƒëa (%)</label>
          <input
            type="number"
            step="1"
            min="0"
            max="100"
            name="wear_max"
            class="hp-form-input"
            placeholder="VD: 100"
          />
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">Ng∆∞·ª°ng c·∫£nh b√°o thay (%)</label>
          <input
            type="number"
            step="1"
            min="0"
            max="100"
            name="nguong_thay"
            class="hp-form-input"
            placeholder="VD: 70"
          />
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">ƒê·ªô c·ª©ng v·∫≠t li·ªáu tham chi·∫øu (HRC)</label>
          <input
            type="number"
            step="1"
            min="0"
            max="70"
            name="hrc_tham_chieu"
            class="hp-form-input"
            placeholder="VD: 45"
          />
        </div>
      </div>

      <div class="hp-divider"></div>

      <div class="hp-form-grid-3">
        <div class="hp-form-group">
          <label class="hp-form-label">ƒêi·ªÉm gi√° (1 = r·∫ª, 5 = r·∫•t ƒë·∫Øt)</label>
          <input
            type="number"
            name="diem_gia"
            class="hp-form-input"
            min="1"
            max="5"
            step="1"
            placeholder="1 ~ 5"
          />
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">ƒêi·ªÉm ƒë·ªô b·ªÅn (1 = th·∫•p, 5 = r·∫•t b·ªÅn)</label>
          <input
            type="number"
            name="diem_do_ben"
            class="hp-form-input"
            min="1"
            max="5"
            step="1"
            placeholder="1 ~ 5"
          />
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">ƒê·ªô ·ªïn ƒë·ªãnh qu√° tr√¨nh (1 = k√©m, 5 = r·∫•t ·ªïn)</label>
          <input
            type="number"
            name="diem_on_dinh"
            class="hp-form-input"
            min="1"
            max="5"
            step="1"
            placeholder="1 ~ 5"
          />
        </div>
      </div>

      <div class="hp-form-grid-3" style="margin-top:10px;">
        <div class="hp-form-group">
          <label class="hp-form-label">Ch·∫•t l∆∞·ª£ng b·ªÅ m·∫∑t (1 = th√¥, 5 = r·∫•t ƒë·∫πp)</label>
          <input
            type="number"
            name="diem_chat_luong_be_mat"
            class="hp-form-input"
            min="1"
            max="5"
            step="1"
            placeholder="1 ~ 5"
          />
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">ƒê·ªô s·∫µn c√≥ (1 = kh√≥ mua, 5 = lu√¥n s·∫µn)</label>
          <input
            type="number"
            name="diem_san_co"
            class="hp-form-input"
            min="1"
            max="5"
            step="1"
            placeholder="1 ~ 5"
          />
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">∆Øu ti√™n d√πng tr∆∞·ªõc (1 = √≠t, 5 = ∆∞u ti√™n cao)</label>
          <input
            type="number"
            name="diem_uu_tien_dung_truoc"
            class="hp-form-input"
            min="1"
            max="5"
            step="1"
            placeholder="1 ~ 5"
          />
        </div>
      </div>

      <div class="hp-divider"></div>

      <div class="hp-form-grid-2">
        <div class="hp-form-group">
          <label class="hp-form-label">Ch·∫ø ƒë·ªô c·∫Øt khuy·∫øn ngh·ªã</label>
          <textarea
            name="che_do_cat_khuyen_nghi"
            class="hp-form-textarea"
            placeholder="VD: ∆Øu ti√™n d√πng v·ªõi S=3200 rpm, F=0.15 mm/v, chi·ªÅu s√¢u c·∫Øt ‚â§ 1.5 mm..."
          ></textarea>
        </div>

        <div class="hp-form-group">
          <label class="hp-form-label">K·∫øt lu·∫≠n fuzzy / khuy·∫øn ngh·ªã thay th·∫ø</label>
          <textarea
            name="ket_luan_fuzzy"
            class="hp-form-textarea"
            placeholder="VD: Khi WEAR > 70% v√† HRC > 40 th√¨ ƒë·ªÅ xu·∫•t thay tool m·ªõi..."
          ></textarea>
        </div>
      </div>
    </div>

    <!-- N√öT L∆ØU -->
    <div class="hp-form-actions">
      <a href="{% url 'tool:tool_list' %}" class="hp-btn">
        H·ªßy
      </a>
      <button type="submit" class="hp-btn hp-btn-primary">
        üíæ L∆∞u Tool ti√™u hao
      </button>
    </div>
  </form>
</div>
{% endblock %}
